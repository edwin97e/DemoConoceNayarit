<p id="notice"><%= notice %></p>

<h1><%= @magictown.title %></h1>

<%= image_tag @magictown.img.url(:medium)%>
<p>
  <strong>Body:</strong>
  <%= raw @magictown.body %>
</p>

<h1 id= "latitude" style="display: none"><%= @magictown.latitude %></h1>

<h1 id= "longitude" style="display: none"><%= @magictown.longitude%></h1>

<div id="mapid" style="height: 500px; width: 1000px;"></div>

<script>
  name = document.getElementsByTagName("h1")[0].innerHTML;
  lati = document.getElementsByTagName("h1")[1].innerHTML;
  long = document.getElementsByTagName("h1")[2].innerHTML;

  mymap = L.map('mapid').setView([lati,long],14);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(mymap);
    

  marker = L.marker([lati, long]).addTo(mymap);
  marker.bindPopup(name).openPopup();

</script>
</br>

<%= link_to 'Edit', edit_magictown_path(@magictown) %> |
<%= link_to 'Back', magictowns_path %>
